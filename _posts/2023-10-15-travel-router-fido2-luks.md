---
title: "Travel router: FIDO2 + LUKS in OpenWrt"
classes: wide
categories:
  - home-infra
---
Уж к концу-то 23го года польза от дорожного роутера должна быть очевидна любому истинному шотландцу, но ко мне это осознание пришло буквально в прошлом году. 
Видимо, нужно было кожей почувствовать :) Ну а раз уж это дорожное устройство, то без шифрования файловой системы ему не обойтись о чем и будет этот пост, пристегивайтесь.


![](/assets/images/posts/glinet-fido2/cover.jpg){: .align-center}

# Wait...Travel...Router?!

Дабы проникнуться идеей путешествующего роутера я в прошлом году обзавелся [Slate AX (GL-AXT1800)](https://www.gl-inet.com/products/gl-axt1800/) от GL.iNet и с тех пор не могу отделаться от мысли насколько же кайфово в очередной гостишке достать роутер, подключить его к местному WiFi и получить работающую сеть для всех своих устройств разом. Причем, не просто сеть, а такую как я хочу - с работающим mDNS для Chromecast, с DoH для всех клиентов, с заготовленными туннельчиками на все случаи жизни и т.д.
<figure style="width: 320px" class="align-right">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/posts/glinet-fido2/axt1800_small.png" alt="">
  <figcaption><center>GL-AXT1800: 125 x 82 x 36mm (245g)</center></figcaption>
</figure>



Если говорить предметно о Slate AX, то в интернетах можно найти разных обзоров ([например](https://the-gadgeteer.com/2022/09/24/gl-inet-slate-ax-wifi-6-gigabit-wireless-travel-router-review-safety-and-savings-on-the-road/)). Я ни повторяться ни продавать не хочу, поэтому лучше расскажу почему я в свое время выбрал его:
  - размер и вес не многим больше флагманских лопат
  - достойное железо, особенно для путешественника
  * есть USB Type-A, который можно использовать для всякой периферии (например, USB tethering)
  - питается от USB Type-C, ненавижу возить лишние и не универсальные задярки
  - есть поддержка SD карточки, на которую можно закинуть кинчики и стримить с помощью DLNA на телефон/ноут/chromecast/etc. Конечно, вместо DLNA я бы предпочел Jellyfin, но это же роутер ;)
  - имеет настолько простой UI, что его не страшно давать даже не подготовленным или уставшим людям
  - основан на OpenWrt, пусть и на 21.02, пусть и с бесконечным количеством патчей да костылей
  - [до не давних событий](https://forum.gl-inet.com/t/formal-statement-on-gl-inet-software-going-closed-source/33288) был достаточно открытым

Два последних пункта, правда, наталкивают меня на мысль не поискать ли хорошую WiFi карточку (это сложнее, чем кажется) для [NanoPi R5C](https://www.friendlyelec.com/index.php?route=product/product&product_id=290) и собрать сильно более открытый роутер, но речь сегодня не об этом. Во всем остальном он меня полностью удовлетворяет. Во всем остальном, кроме одного - он не имеет шифрования диска с чем я не намерен мириться ◟(`ﮧ´ ◟ )

# От задачи шифрования диска
Не-не, поймите меня правильно, я не параноик и все гораздо прагматичнее - я НЕ хочу в спешке менять явки и пароли, хранящиеся в роутере, потому что мой багаж задержали/утеряли/украли/etc. И это, наверное, максимум, чем тут может помочь шифрование диска. Т.е. логично, что если какой-то злой дяденька имел физический контакт с твоим устройством - его нужно сжечь и больше не использовать. Во-первых, это больше не твоя железка, а во-вторых, ну фу! Но `ЖЕЛЕЗКА < ХРАНИМЫЕ КРЕДЫ`, потому не велика беда, особенно когда ты под пальмой и в отпуске (^_^)

# К выбору решения
Коль задача спасения кред, хранящихся в роутере, ясна, пришло время выбирать решение. Не скажу, что я прям много думал, но 

![](/assets/images/posts/glinet-fido2/fido_devices.excalidraw.png){: .align-center}

юбик type-c - 5.4.2
юбик type-a - 5..7